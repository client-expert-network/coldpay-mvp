{% extends 'base.html' %}
{% load static %}

{% block vendor_css %}
  <link rel="stylesheet" href="{% static 'vendor/libs/node-waves/node-waves.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/perfect-scrollbar/perfect-scrollbar.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/typeahead-js/typeahead.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/fullcalendar/fullcalendar.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/flatpickr/flatpickr.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/select2/select2.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/quill/editor.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/@form-validation/form-validation.css' %}" />
{% endblock %}

{% block page_css %}
  <link rel="stylesheet" href="{% static 'vendor/css/pages/app-calendar.css' %}" />
{% endblock %}

{% block content %}
  <!-- Layout wrapper -->
  <div class="layout-wrapper layout-navbar-full layout-horizontal layout-without-menu">
    <div class="layout-container">
      <!-- Navbar -->

      {% include 'partials/navbar.html' %}

      <!-- / Navbar -->

      <!-- Layout container -->
      <div class="layout-page">
        <!-- Content wrapper -->
        <div class="content-wrapper">
          <!-- Content -->

          <div class="container-xxl flex-grow-1 container-p-y">
            <div class="card app-calendar-wrapper">
              <div class="row g-0">
                <!-- Calendar Sidebar -->
                <div class="col app-calendar-sidebar border-end" id="app-calendar-sidebar">
                  <div class="border-bottom p-6 my-sm-0 mb-4">
                    <button class="btn btn-primary btn-toggle-sidebar w-100" data-bs-toggle="offcanvas" data-bs-target="#addEventSidebar" aria-controls="addEventSidebar">
                      <i class="ti ti-plus ti-16px me-2"></i>
                      <span class="align-middle">이벤트 추가</span>
                    </button>
                  </div>
                  <div class="px-3 pt-2">
                    <!-- inline calendar (flatpicker) -->
                    <div class="inline-calendar" id="flatpicker"></div>
                  </div>
                  <hr class="mb-6 mx-n4 mt-3" />
                  <div class="px-6 pb-2">
                    <!-- Filter -->
                    <div>
                      <h5>이벤트 필터</h5>
                    </div>

                    <div class="form-check form-check-secondary mb-5 ms-2">
                      <input class="form-check-input select-all" type="checkbox" id="selectAll" data-value="all" checked />
                      <label class="form-check-label" for="selectAll">전체 보기</label>
                    </div>

                    <div class="app-calendar-events-filter text-heading">
                      <div class="form-check form-check-danger mb-5 ms-2">
                        <input class="form-check-input input-filter" type="checkbox" id="select-personal" data-value="personal" checked />
                        <label class="form-check-label" for="select-personal">개인</label>
                      </div>
                      <div class="form-check mb-5 ms-2">
                        <input class="form-check-input input-filter" type="checkbox" id="select-business" data-value="business" checked />
                        <label class="form-check-label" for="select-business">업무</label>
                      </div>
                      <div class="form-check form-check-warning mb-5 ms-2">
                        <input class="form-check-input input-filter" type="checkbox" id="select-family" data-value="family" checked />
                        <label class="form-check-label" for="select-family">가족</label>
                      </div>
                      <div class="form-check form-check-success mb-5 ms-2">
                        <input class="form-check-input input-filter" type="checkbox" id="select-holiday" data-value="holiday" checked />
                        <label class="form-check-label" for="select-holiday">휴일</label>
                      </div>
                      <div class="form-check form-check-info ms-2">
                        <input class="form-check-input input-filter" type="checkbox" id="select-etc" data-value="etc" checked />
                        <label class="form-check-label" for="select-etc">기타</label>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- /Calendar Sidebar -->

                <!-- Calendar & Modal -->
                <div class="col app-calendar-content">
                  <div class="card shadow-none border-0">
                    <div class="card-body pb-0">
                      <!-- FullCalendar -->
                      <div id="calendar"></div>
                    </div>
                  </div>
                  <div class="app-overlay"></div>
                  <!-- FullCalendar Offcanvas -->
                  <div class="offcanvas offcanvas-end event-sidebar" tabindex="-1" id="addEventSidebar" aria-labelledby="addEventSidebarLabel">
                    <div class="offcanvas-header border-bottom">
                      <h5 class="offcanvas-title" id="addEventSidebarLabel">이벤트 추가</h5>
                      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                      <form class="event-form pt-0" id="eventForm" onsubmit="return false">
                        <div class="mb-5">
                          <label class="form-label" for="eventTitle">제목</label>
                          <input type="text" class="form-control" id="eventTitle" name="eventTitle" placeholder="이벤트 제목" />
                        </div>
                        <div class="mb-5">
                          <label class="form-label" for="eventLabel">라벨</label>
                          <select class="select2 select-event-label form-select" id="eventLabel" name="eventLabel">
                            <option data-label="primary" value="Business" selected>업무</option>
                            <option data-label="danger" value="Personal">개인</option>
                            <option data-label="warning" value="Family">가족</option>
                            <option data-label="success" value="Holiday">휴일</option>
                            <option data-label="info" value="ETC">기타</option>
                          </select>
                        </div>
                        <div class="mb-5">
                          <label class="form-label" for="eventStartDate">시작일</label>
                          <input type="text" class="form-control" id="eventStartDate" name="eventStartDate" placeholder="시작일" />
                        </div>
                        <div class="mb-5">
                          <label class="form-label" for="eventEndDate">종료일</label>
                          <input type="text" class="form-control" id="eventEndDate" name="eventEndDate" placeholder="종료일" />
                        </div>
                        <div class="mb-5">
                          <div class="form-check form-switch">
                            <input type="checkbox" class="form-check-input allDay-switch" id="allDaySwitch" />
                            <label class="form-check-label" for="allDaySwitch">종일</label>
                          </div>
                        </div>
                        <div class="mb-5">
                          <label class="form-label" for="eventURL">이벤트 URL</label>
                          <input type="url" class="form-control" id="eventURL" name="eventURL" placeholder="https://www.example.com" />
                        </div>
                        <div class="mb-4 select2-primary">
                          <label class="form-label" for="eventGuests">게스트 추가</label>
                          <select class="select2 select-event-guests form-select" id="eventGuests" name="eventGuests" multiple>
                            <option data-avatar="1.png" value="Jane Foster">Jane Foster</option>
                            <option data-avatar="3.png" value="Donna Frank">Donna Frank</option>
                            <option data-avatar="5.png" value="Gabrielle Robertson">Gabrielle Robertson</option>
                            <option data-avatar="7.png" value="Lori Spears">Lori Spears</option>
                            <option data-avatar="9.png" value="Sandy Vega">Sandy Vega</option>
                            <option data-avatar="11.png" value="Cheryl May">Cheryl May</option>
                          </select>
                        </div>
                        <div class="mb-5">
                          <label class="form-label" for="eventLocation">위치</label>
                          <input type="text" class="form-control" id="eventLocation" name="eventLocation" placeholder="위치 입력" />
                        </div>
                        <div class="mb-5">
                          <label class="form-label" for="eventDescription">설명</label>
                          <textarea class="form-control" name="eventDescription" id="eventDescription"></textarea>
                        </div>
                        <div class="d-flex justify-content-sm-between justify-content-start mt-6 gap-2">
                          <div class="d-flex">
                            <button type="submit" id="addEventBtn" class="btn btn-primary btn-add-event me-4">추가</button>
                            <button type="reset" class="btn btn-label-secondary btn-cancel me-sm-0 me-1" data-bs-dismiss="offcanvas">취소</button>
                          </div>
                          <button class="btn btn-label-danger btn-delete-event d-none">삭제</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
                <!-- /Calendar & Modal -->
              </div>
            </div>
          </div>
          <!-- / Content -->

          <!-- Footer -->
          <footer class="content-footer footer bg-footer-theme">
            <div class="container-xxl">
              <div class="footer-container d-flex align-items-center justify-content-between py-4 flex-md-row flex-column">
                <div class="text-body">
                  ©<script>
                     document.write(new Date().getFullYear())
                   </script>, made with ❤️ by <a href="https://pixinvent.com" target="_blank" class="footer-link">Pixinvent</a>
                </div>
                <div class="d-none d-lg-inline-block">
                  <a href="https://themeforest.net/licenses/standard" class="footer-link me-4" target="_blank">라이센스</a>
                  <a href="https://1.envato.market/pixinvent_portfolio" target="_blank" class="footer-link me-4">더 많은 테마</a>
                  <a href="https://demos.pixinvent.com/vuexy-html-admin-template/documentation/" target="_blank" class="footer-link me-4">문서</a>
                  <a href="https://pixinvent.ticksy.com/" target="_blank" class="footer-link d-none d-sm-inline-block">지원</a>
                </div>
              </div>
            </div>
          </footer>
          <!-- / Footer -->

          <div class="content-backdrop fade"></div>
        </div>
        <!-- / Content wrapper -->
      </div>

      <!-- / Layout container -->
    </div>
  </div>

  <!-- Overlay -->
  <div class="layout-overlay layout-menu-toggle"></div>

  <!-- Drag Target Area To SlideIn Menu On Small Screens -->
  <div class="drag-target"></div>
{% endblock %}

{% block vendor_js %}
  <script src="{% static 'vendor/libs/fullcalendar/fullcalendar.js' %}"></script>
  <script src="{% static 'vendor/libs/@form-validation/popular.js' %}"></script>
  <script src="{% static 'vendor/libs/@form-validation/bootstrap5.js' %}"></script>
  <script src="{% static 'vendor/libs/@form-validation/auto-focus.js' %}"></script>
  <script src="{% static 'vendor/libs/select2/select2.js' %}"></script>
  <script src="{% static 'vendor/libs/moment/moment.js' %}"></script>
  <script src="{% static 'vendor/libs/flatpickr/flatpickr.js' %}"></script>
  <script src="{% static 'vendor/libs/flatpickr/l10n/ko.js' %}"></script>
  <script>
    flatpickr.setDefaults({
      locale: 'ko' // 전역 로케일 설정
    })
  </script>
{% endblock %}

{% block page_js %}
  <script src="{% static 'js/app-calendar-events.js' %}"></script>
  <script src="{% static 'js/app-calendar.js' %}"></script>
  {% comment %} <script>
    document.addEventListener('DOMContentLoaded', function () {
      flatpickr('.inline-calendar', {
        inline: true,
        locale: 'ko' // locale을 'ko'로 설정
      })
    })
  </script> {% endcomment %}
{% endblock %}
