{% extends 'base.html' %}
{% load socialaccount %}
{% load static %}

{% block vendor_css %}
  <link rel="stylesheet" href="{% static 'vendor/libs/node-waves/node-waves.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/perfect-scrollbar/perfect-scrollbar.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/typeahead-js/typeahead.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/@form-validation/form-validation.css' %}" />
{% endblock %}

{% block page_css %}
  <link rel="stylesheet" href="{% static 'vendor/css/pages/page-auth.css' %}" />
{% endblock %}

{% block content %}

<div class="container-xxl">
    <div class="authentication-wrapper authentication-basic container-p-y">
      <div class="authentication-inner py-6">
        <!-- 로그인 -->
        <div class="card">
            <div class="card-body">
            <!-- 로고 -->
                <div class="app-brand justify-content-center mb-6">
                    <a href="{% url 'home' %}" class="app-brand-link">
                        <span class="app-brand-logo demo">로고</span>
                        <span class="app-brand-text demo text-heading fw-bold">ColdPay</span>
                    </a>
                    </div>
                    <h4 class="mb-1">Reset Your Password</h4>
                        <form method="post">
                            {% csrf_token %}
                            <label for="new_password">New Password:</label>
                            <input type="password" id="new_password" name="new_password" required>
                            <label for="confirm_password">Confirm New Password:</label>
                            <input type="password" id="confirm_password" name="confirm_password" required>
                            <button type="submit">Reset Password</button>
                        </form>
                </div>
            </div>
        </div>
    </div>
</div>

{% if messages %}
<div class="modal" tabindex="-1" role="dialog" id="messageModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Message</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        {% for message in messages %}
        <p>{{ message }}</p>
        {% endfor %}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script>
// Check if we need to show the modal
if (new URLSearchParams(window.location.search).has('showModal')) {
    $(document).ready(function() {
        $('#messageModal').modal('show');
        setTimeout(function() {
            $('#messageModal').modal('hide');
            // Redirect after the modal is hidden
            window.location.href = "{% url 'login' %}";
        }, 5000); // Show the modal for 5 seconds
    });
}
</script>
{% endif %}

{% endblock %}

{% block vendor_js %}
  <script src="{% static 'vendor/libs/@form-validation/popular.js' %}"></script>
  <script src="{% static 'vendor/libs/@form-validation/bootstrap5.js' %}"></script>
  <script src="{% static 'vendor/libs/@form-validation/auto-focus.js' %}"></script>
{% endblock %}

{% block page_js %}
  <script src="{% static 'js/pages-auth.js' %}"></script>
{% endblock %}
